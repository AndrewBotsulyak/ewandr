<header class="header" [class.scrolled]="isScrolled()">
  <div class="header-container">
    <!-- Logo -->
    <lib-header-logo (logoClick)="closeMobileMenu()" />

    <!-- Desktop Navigation -->
    <nav class="desktop-nav">
      <!-- Categories Dropdown -->
      <lib-categories-menu
        [categories]="categories()"
        (categorySelect)="navigateToCategory($event)"
      />

      <!-- Search Bar -->
      <lib-search-bar
        [(searchQuery)]="searchQuery"
        [(isFocused)]="isSearchFocused"
        (search)="onSearch($event)"
      />
    </nav>

    <!-- Desktop Actions -->
    <div class="desktop-actions">
      <!-- Theme Toggle -->
      <lib-theme-toggle
        [currentTheme]="currentTheme()"
        (themeToggle)="toggleTheme()"
      />

      <!-- Cart -->
      <lib-cart-button
        [itemCount]="cartItemsCount()"
        (cartClick)="navigateToCart()"
      />

      <!-- User Menu -->
      <lib-user-menu
        [user]="currentUser()"
        (profileClick)="navigateToProfile()"
        (ordersClick)="navigateToOrders()"
        (settingsClick)="navigateToSettings()"
        (logoutClick)="logout()"
      />
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-button" (click)="toggleMobileMenu()">
      <mat-icon>{{ isMobileMenuOpen() ? 'close' : 'menu' }}</mat-icon>
    </button>
  </div>

  <!-- Mobile Navigation -->
  <lib-mobile-menu
    [isOpen]="isMobileMenuOpen()"
    [categories]="categories()"
    [user]="currentUser()"
    [currentTheme]="currentTheme()"
    [cartItemCount]="cartItemsCount()"
    (close)="closeMobileMenu()"
    (search)="onSearch($event)"
    (categorySelect)="navigateToCategory($event)"
    (themeToggle)="toggleTheme()"
    (cartClick)="navigateToCart()"
    (profileClick)="navigateToProfile()"
    (ordersClick)="navigateToOrders()"
    (settingsClick)="navigateToSettings()"
    (logoutClick)="logout()"
  />
</header>
